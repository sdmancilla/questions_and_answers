<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/styles/questions.css">
    <title>Questions</title>
</head>

<body>
    <header>
        <a class="a-back" href="/">Exit</a>
    </header>

    <main>
        <div class="bg">
            <h1 id="question">¿Cuál es el color del agua?</h1>
            <div class="answers">
                <label>
                    <input type="radio" name="answer" class="answer" value="Azul">
                    Answer text 1
                </label>
                <br>
                <label>
                    <input type="radio" name="answer" class="answer" value="Blanco">
                    Answer text 2
                </label>
                <br>
                <label>
                    <input type="radio" name="answer" class="answer" value="Amarillo">
                    Answer text 3
                </label>
                <br>
                <label>
                    <input type="radio" name="answer" class="answer" value="Verde">
                    Answer text 4
                </label>
                <br>
            </div>
            <input type="text" autocomplete="off" id="username" required placeholder="Type your name">
            <a href="questions" id="start" class="btn-ini">Beggin test</a>
            <p class="warning hidden">* You must type a valid name</p>
        </div>
    </main>
    <script>
        const question = document.getElementById("question")
        const answers = document.querySelectorAll("input.answer")
        answers.forEach((answer) => {
            answer.addEventListener("click", async () => {
                const response = await fetch("/questions", {
                    method: "post",
                    body: JSON.stringify({
                        answer: answer.value,
                        question: question.innerText
                    }),
                    headers: { "Content-Type": "application/json; charset=utf-8" }
                })
                const result = await response.json();
                answers.forEach(answer => {
                    answer.setAttribute("disabled", true)
                });
            })
        })
        window.onload = async () => {
            const difficulty = JSON.parse(localStorage.getItem("player")).difficult;
            const response = await fetch(`/questions/${difficulty}`);
            const result = await response.json();
        }
    </script>
</body>

</html>